<div class="container">
  <div class="row align-items-start" >
    <div class="col-4">
      <div class="card" *ngIf="user">
        <img
          src="{{'assets/img/profilepickplaceholder.jpg'}}"
          alt="John" style="width:100%">
        <h1>{{user.firstName}} {{user.lastName}}</h1>
        <p class="title">Just user</p>
        <p>{{user.email}}</p>

        <p>
          <button class="contact-button">Contact</button>
        </p>
      </div>
    </div>
    <div class="col-lg-8">
      <ul class="nav nav-tabs">
        <ngb-tabset>
          <ngb-tab title="Profile">
            <ng-template ngbTabContent>
              <form  *ngIf="user" #f="ngForm" (ngSubmit)="save(f.value)">
                <div class="bot-border"></div>
                <div class=" form-group">
                  <label for="firstName">First Name:</label>
                  <input #title="ngModel" [readonly]="!isEditing" [(ngModel)]="user.firstName" name="firstName" id="firstName" type="text"
                         class="form-control">
                </div>
                <div class="clearfix"></div>
                <div class="bot-border"></div>

                <div class=" form-group">
                  <label for="lastName">Last Name:</label>
                  <input #title="ngModel" [readonly]="!isEditing"[(ngModel)]="user.lastName" name="firstName" id="lastName" type="text"
                         class="form-control">
                </div>
                <div class="clearfix"></div>
                <div class="bot-border"></div>
                <div class=" form-group">
                  <label for="email">Email:</label>
                  <input #title="ngModel" [readonly]="!isEditing"[(ngModel)]="user.email" name="email" id="email" type="text"
                         class="form-control">
                </div>
                <div class="clearfix"></div>
              <div *ngIf="authService.getCurrentUser().sub === user.username">
                <button *ngIf="!isEditing" class="btn btn-primary" type="button" (click)="edit()">Edit</button>
                <button *ngIf="isEditing" class="btn btn-primary"  type="button" (click)="edit()">Save</button></div>
              </form>
            </ng-template>
          </ngb-tab>
          <ngb-tab title="My books">
            <ng-template ngbTabContent>
              <div class="bot-border"></div>
              <div *ngIf="userVotes">
                <table class="table">
                  <thead>
                  <tr>
                    <th scope="col">Title</th>
                    <th scope="col">My vote</th>
                    <th scope="col">Comment</th>
                  </tr>
                  </thead>
                  <tbody *ngFor="let v of userVotes">
                  <tr>
                    <td><a [routerLink]="['/books/',v.bookId]">{{v.bookName}}</a></td>
                    <td>
                      <ngb-rating
                        [(rate)]="v.value"
                        [readonly]="true" max="5">
                        <ng-template let-fill="fill" let-index="index">
                          <span class="star" [class.filled]="fill === 100">&#9733;</span>
                        </ng-template>
                      </ngb-rating>
                    </td>
                    <td>-</td>
                  </tr>
                  </tbody>
                </table>
              </div>
            </ng-template>
          </ngb-tab>
        </ngb-tabset>
      </ul>
    </div>
  </div>
</div>
